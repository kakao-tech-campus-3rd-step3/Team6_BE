import{_ as s,c as a,o as i,ae as e}from"./chunks/framework.CBTkueSR.js";const g=JSON.parse('{"title":"Waiting Room WebSocket API","description":"","frontmatter":{},"headers":[],"relativePath":"api/websocket/waiting-room.md","filePath":"api/websocket/waiting-room.md"}'),l={name:"api/websocket/waiting-room.md"};function n(d,t,p,o,h,r){return i(),a("div",null,[...t[0]||(t[0]=[e(`<h1 id="waiting-room-websocket-api" tabindex="-1">Waiting Room WebSocket API <a class="header-anchor" href="#waiting-room-websocket-api" aria-label="Permalink to &quot;Waiting Room WebSocket API&quot;">​</a></h1><h2 id="client-→-server" tabindex="-1">Client → Server <a class="header-anchor" href="#client-→-server" aria-label="Permalink to &quot;Client → Server&quot;">​</a></h2><h3 id="대기방-생성" tabindex="-1">대기방 생성 <a class="header-anchor" href="#대기방-생성" aria-label="Permalink to &quot;대기방 생성&quot;">​</a></h3><ul><li><strong>Destination</strong>: <code>/app/waiting-room/create</code></li><li><strong>설명</strong>: 새로운 대기방을 생성합니다. 성공 시 생성된 <code>roomId</code>를 <code>/user/queue/waiting-room</code>으로 전송받습니다.</li></ul><h4 id="request-payload-createwaitingroomcommand" tabindex="-1">Request Payload: <code>CreateWaitingRoomCommand</code> <a class="header-anchor" href="#request-payload-createwaitingroomcommand" aria-label="Permalink to &quot;Request Payload: \`CreateWaitingRoomCommand\`&quot;">​</a></h4><table tabindex="0"><thead><tr><th style="text-align:left;">필드</th><th style="text-align:left;">타입</th><th style="text-align:left;">설명</th></tr></thead><tbody><tr><td style="text-align:left;">name</td><td style="text-align:left;">String</td><td style="text-align:left;">방 이름 (max 255)</td></tr><tr><td style="text-align:left;">capacity</td><td style="text-align:left;">Integer</td><td style="text-align:left;">최대 참여 인원 (2-20)</td></tr></tbody></table><div class="vp-code-group vp-adaptive-theme"><div class="tabs"><input type="radio" name="group-AVyKu" id="tab-WIneiqj" checked><label data-title="Request Payload Example" for="tab-WIneiqj">Request Payload Example</label></div><div class="blocks"><div class="language-json vp-adaptive-theme active"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;카카오테크캠퍼스 아이디어톤&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;capacity&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">7</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div></div></div><h4 id="response-to-user-queue-waiting-room-waitingroomid" tabindex="-1">Response (to <code>/user/queue/waiting-room</code>): <code>WaitingRoomId</code> <a class="header-anchor" href="#response-to-user-queue-waiting-room-waitingroomid" aria-label="Permalink to &quot;Response (to \`/user/queue/waiting-room\`): \`WaitingRoomId\`&quot;">​</a></h4><table tabindex="0"><thead><tr><th style="text-align:left;">필드</th><th style="text-align:left;">타입</th><th style="text-align:left;">설명</th></tr></thead><tbody><tr><td style="text-align:left;">status</td><td style="text-align:left;">String</td><td style="text-align:left;">응답 상태 (<code>&quot;SUCCESS&quot;</code>)</td></tr><tr><td style="text-align:left;">data</td><td style="text-align:left;">Object</td><td style="text-align:left;">응답 데이터</td></tr><tr><td style="text-align:left;">data.roomId</td><td style="text-align:left;">String</td><td style="text-align:left;">생성된 대기방 ID</td></tr><tr><td style="text-align:left;">message</td><td style="text-align:left;">String</td><td style="text-align:left;">응답 메시지</td></tr></tbody></table><div class="vp-code-group vp-adaptive-theme"><div class="tabs"><input type="radio" name="group-DzDem" id="tab-qoZGaS1" checked><label data-title="Response Payload Example" for="tab-qoZGaS1">Response Payload Example</label></div><div class="blocks"><div class="language-json vp-adaptive-theme active"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;status&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;SUCCESS&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;data&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;roomId&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;a1b2c3d4-e5f6-7890-1234-567890abcdef&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;message&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;대기방이 정상적으로 생성되었습니다.&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div></div></div><h3 id="대기방-참여" tabindex="-1">대기방 참여 <a class="header-anchor" href="#대기방-참여" aria-label="Permalink to &quot;대기방 참여&quot;">​</a></h3><ul><li><strong>Destination</strong>: <code>/app/waiting-room/{roomId}/join</code></li><li><strong>PathVariable</strong>: <code>roomId</code> (String)</li><li><strong>설명</strong>: 기존 대기방에 참여합니다. 참여 성공 시, 해당 대기방의 모든 참여자에게 <code>/topic/waiting-room/{roomId}</code>로 <code>PARTICIPANT_JOINED</code> 메시지가 전송됩니다.</li></ul><hr><h2 id="server-→-client" tabindex="-1">Server → Client <a class="header-anchor" href="#server-→-client" aria-label="Permalink to &quot;Server → Client&quot;">​</a></h2><h3 id="대기방-상태-구독" tabindex="-1">대기방 상태 구독 <a class="header-anchor" href="#대기방-상태-구독" aria-label="Permalink to &quot;대기방 상태 구독&quot;">​</a></h3><ul><li><strong>Topic</strong>: <code>/topic/waiting-room/{roomId}</code></li><li><strong>설명</strong>: 대기방의 상태 변경(참가자 입장, 게임 시작)을 수신합니다. 메시지는 <code>type</code> 필드로 구분됩니다.</li></ul><h4 id="participant-joined" tabindex="-1"><code>PARTICIPANT_JOINED</code> <a class="header-anchor" href="#participant-joined" aria-label="Permalink to &quot;\`PARTICIPANT_JOINED\`&quot;">​</a></h4><p>참가자가 대기방에 입장했을 때 전송됩니다.</p><p><strong>Payload</strong>: <code>ParticipantJoinedPayload</code></p><table tabindex="0"><thead><tr><th style="text-align:left;">필드</th><th style="text-align:left;">타입</th><th style="text-align:left;">설명</th></tr></thead><tbody><tr><td style="text-align:left;">status</td><td style="text-align:left;">String</td><td style="text-align:left;">응답 상태 (<code>&quot;SUCCESS&quot;</code>)</td></tr><tr><td style="text-align:left;">data</td><td style="text-align:left;">Object</td><td style="text-align:left;">응답 데이터</td></tr><tr><td style="text-align:left;">data.type</td><td style="text-align:left;">String</td><td style="text-align:left;">메시지 타입 (<code>&quot;PARTICIPANT_JOINED&quot;</code>)</td></tr><tr><td style="text-align:left;">data.payload</td><td style="text-align:left;">Object</td><td style="text-align:left;">실제 페이로드</td></tr><tr><td style="text-align:left;">data.payload.status</td><td style="text-align:left;">String</td><td style="text-align:left;">대기방 상태 (<code>AVAILABLE</code>, <code>FULL</code>)</td></tr><tr><td style="text-align:left;">data.payload.room</td><td style="text-align:left;">Object</td><td style="text-align:left;">대기방 정보</td></tr><tr><td style="text-align:left;">data.payload.room.roomId</td><td style="text-align:left;">String</td><td style="text-align:left;">대기방 ID</td></tr><tr><td style="text-align:left;">data.payload.room.name</td><td style="text-align:left;">String</td><td style="text-align:left;">대기방 이름</td></tr><tr><td style="text-align:left;">data.payload.room.capacity</td><td style="text-align:left;">Integer</td><td style="text-align:left;">최대 참여 인원</td></tr><tr><td style="text-align:left;">data.payload.room.hostId</td><td style="text-align:left;">Long</td><td style="text-align:left;">방장 ID</td></tr><tr><td style="text-align:left;">data.payload.participants</td><td style="text-align:left;">Pariticipants[]</td><td style="text-align:left;">참여자 목록</td></tr><tr><td style="text-align:left;">data.payload.participants[].id</td><td style="text-align:left;">Long</td><td style="text-align:left;">참여자 ID</td></tr><tr><td style="text-align:left;">data.payload.participants[].name</td><td style="text-align:left;">String</td><td style="text-align:left;">참여자 이름</td></tr><tr><td style="text-align:left;">data.payload.participants[].role</td><td style="text-align:left;">String</td><td style="text-align:left;">참여자 역할 (<code>HOST</code>, <code>MEMBER</code>)</td></tr><tr><td style="text-align:left;">message</td><td style="text-align:left;">String</td><td style="text-align:left;">응답 메시지</td></tr></tbody></table><p><strong>Payload</strong>: <code>ParticipantPayload</code></p><table tabindex="0"><thead><tr><th style="text-align:left;">필드</th><th style="text-align:left;">타입</th><th style="text-align:left;">설명</th></tr></thead><tbody><tr><td style="text-align:left;">data.payload.participants[].id</td><td style="text-align:left;">Long</td><td style="text-align:left;">참여자 ID</td></tr><tr><td style="text-align:left;">data.payload.participants[].name</td><td style="text-align:left;">String</td><td style="text-align:left;">참여자 이름</td></tr><tr><td style="text-align:left;">data.payload.participants[].role</td><td style="text-align:left;">String</td><td style="text-align:left;">참여자 역할 (<code>HOST</code>, <code>MEMBER</code>)</td></tr></tbody></table><div class="vp-code-group vp-adaptive-theme"><div class="tabs"><input type="radio" name="group-d7Z9W" id="tab-pyfoLm-" checked><label data-title="Response Payload Example" for="tab-pyfoLm-">Response Payload Example</label></div><div class="blocks"><div class="language-json vp-adaptive-theme active"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;status&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;SUCCESS&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;data&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;PARTICIPANT_JOINED&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;payload&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;status&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;AVAILABLE&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;room&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;roomId&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;a1b2c3d4-e5f6-7890-1234-567890abcdef&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;카카오테크캠퍼스 아이디어톤&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;capacity&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">7</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;hostId&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;participants&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">          &quot;id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">          &quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;홍길동&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">          &quot;role&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;HOST&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">          &quot;id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">          &quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;김철수&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">          &quot;role&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;MEMBER&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;message&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;대기방에 참가자가 입장했습니다.&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div></div></div><h4 id="room-started" tabindex="-1"><code>ROOM_STARTED</code> <a class="header-anchor" href="#room-started" aria-label="Permalink to &quot;\`ROOM_STARTED\`&quot;">​</a></h4><p>대기방이 가득 차서 게임이 시작될 때 전송됩니다.</p><p><strong>Payload</strong>: <code>RoomStartedPayload</code></p><table tabindex="0"><thead><tr><th style="text-align:left;">필드</th><th style="text-align:left;">타입</th><th style="text-align:left;">설명</th></tr></thead><tbody><tr><td style="text-align:left;">status</td><td style="text-align:left;">String</td><td style="text-align:left;">응답 상태 (<code>&quot;SUCCESS&quot;</code>)</td></tr><tr><td style="text-align:left;">data</td><td style="text-align:left;">Object</td><td style="text-align:left;">응답 데이터</td></tr><tr><td style="text-align:left;">data.type</td><td style="text-align:left;">String</td><td style="text-align:left;">메시지 타입 (<code>&quot;ROOM_STARTED&quot;</code>)</td></tr><tr><td style="text-align:left;">data.roomId</td><td style="text-align:left;">String</td><td style="text-align:left;">시작된 방(게임)의 ID</td></tr><tr><td style="text-align:left;">message</td><td style="text-align:left;">String</td><td style="text-align:left;">응답 메시지</td></tr></tbody></table><div class="vp-code-group vp-adaptive-theme"><div class="tabs"><input type="radio" name="group-U3OM2" id="tab-x4-36_1" checked><label data-title="Response Payload Example" for="tab-x4-36_1">Response Payload Example</label></div><div class="blocks"><div class="language-json vp-adaptive-theme active"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;status&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;SUCCESS&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;data&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ROOM_STARTED&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;roomId&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;a1b2c3d4-e5f6-7890-1234-567890abcdef&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;message&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;대기방이 시작되었습니다.&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div></div></div>`,28)])])}const E=s(l,[["render",n]]);export{g as __pageData,E as default};
